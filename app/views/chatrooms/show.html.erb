<div class="d-flex chatroom-container mb-5" data-controller="chatroom">
  <div class="chatroom-side p-3 rounded-lg">
    <% @chatrooms.each do |chatroom| %>
      <% other_user = chatroom.first_user == current_user ? chatroom.second_user : chatroom.first_user %>
      <%= link_to chatroom_path(chatroom), class: "chatroom-user", data: { chatroom_target: 'user' } do %>
      <% if user.photo.attached? %>
        <%= cl_image_tag user.photo.key, :width=>300, :height=>300, :gravity=>"face", "radius" => "20", :crop=>"thumb" %>
      <% else %>
        <img class="avatar" src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/logo.png" />
      <% end %>
        <h4 class="flex-grow-1 ms-2"><%= other_user.nickname %></h4>
      <% end %>
  <% end %>
  </div>

  <%= render 'chatroom', chatroom: @chatroom %>
</div>

